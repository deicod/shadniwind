{
  "name": "button",
  "type": "registry:ui",
  "title": "Button",
  "description": "Button component with variants and pressed/disabled/loading states.",
  "registryDependencies": [
    "@shadniwind/tokens"
  ],
  "files": [
    {
      "path": "components/ui/button.tsx",
      "content": "import type React from \"react\"\nimport { forwardRef, useEffect, useMemo, useState } from \"react\"\nimport {\n  ActivityIndicator,\n  Platform,\n  Pressable,\n  type PressableProps,\n  type StyleProp,\n  Text,\n  type TextStyle,\n  type ViewStyle,\n} from \"react-native\"\nimport { StyleSheet, useUnistyles } from \"react-native-unistyles\"\n\n/**\n * Visual variants for the Button component.\n * - `default`: Filled primary color.\n * - `destructive`: Filled destructive color (e.g., red) for dangerous actions.\n * - `outline`: Bordered with background color.\n * - `secondary`: Filled with secondary color.\n * - `ghost`: Transparent background, hover effect only.\n * - `link`: Underlined text, no background.\n */\nexport type ButtonVariant =\n  | \"default\"\n  | \"destructive\"\n  | \"outline\"\n  | \"secondary\"\n  | \"ghost\"\n  | \"link\"\n\n/**\n * Size presets for the Button component.\n * - `default`: Standard height (40px) and padding.\n * - `sm`: Smaller height (36px) for compact areas.\n * - `lg`: Taller height (44px) for emphasis.\n * - `icon`: Square button (40x40) for icons only.\n */\nexport type ButtonSize = \"default\" | \"sm\" | \"lg\" | \"icon\"\n\n/**\n * Props for the Button component.\n */\nexport type ButtonProps = Omit<PressableProps, \"style\"> & {\n  /**\n   * The visual style of the button.\n   * @default \"default\"\n   */\n  variant?: ButtonVariant\n  /**\n   * The size of the button.\n   * @default \"default\"\n   */\n  size?: ButtonSize\n  /**\n   * If true, displays a loading spinner and disables interaction.\n   * The spinner matches the text color of the variant.\n   */\n  loading?: boolean\n  style?: StyleProp<ViewStyle>\n  textStyle?: StyleProp<TextStyle>\n}\n\nconst DEFAULT_VARIANT: ButtonVariant = \"default\"\nconst DEFAULT_SIZE: ButtonSize = \"default\"\n\nconst styles = StyleSheet.create((theme) => {\n  const focusRingStyle =\n    Platform.OS === \"web\"\n      ? ({\n          outlineStyle: \"solid\",\n          outlineWidth: 2,\n          outlineColor: theme.colors.ring,\n          outlineOffset: 2,\n        } as const)\n      : {}\n\n  return {\n    container: {\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      borderRadius: theme.radius.md,\n      borderWidth: 1,\n      borderColor: \"transparent\",\n      backgroundColor: theme.colors.primary,\n      variants: {\n        variant: {\n          default: {\n            backgroundColor: theme.colors.primary,\n          },\n          destructive: {\n            backgroundColor: theme.colors.destructive,\n          },\n          outline: {\n            backgroundColor: theme.colors.background,\n            borderColor: theme.colors.input,\n          },\n          secondary: {\n            backgroundColor: theme.colors.secondary,\n          },\n          ghost: {\n            backgroundColor: \"transparent\",\n          },\n          link: {\n            backgroundColor: \"transparent\",\n            borderColor: \"transparent\",\n          },\n        },\n        size: {\n          default: {\n            height: 40,\n            paddingHorizontal: 16,\n          },\n          sm: {\n            height: 36,\n            paddingHorizontal: 12,\n          },\n          lg: {\n            height: 44,\n            paddingHorizontal: 24,\n          },\n          icon: {\n            height: 40,\n            width: 40,\n            paddingHorizontal: 0,\n          },\n        },\n        pressed: {\n          true: {\n            opacity: 0.9,\n          },\n        },\n        disabled: {\n          true: {\n            opacity: 0.6,\n          },\n        },\n        loading: {\n          true: {\n            opacity: 0.7,\n          },\n        },\n        focusVisible: {\n          true: focusRingStyle,\n        },\n      },\n      compoundVariants: [\n        {\n          variant: \"link\",\n          styles: {\n            paddingHorizontal: 0,\n          },\n        },\n        {\n          variant: \"outline\",\n          pressed: true,\n          styles: {\n            backgroundColor: theme.colors.accent,\n            opacity: 1,\n          },\n        },\n        {\n          variant: \"ghost\",\n          pressed: true,\n          styles: {\n            backgroundColor: theme.colors.accent,\n            opacity: 1,\n          },\n        },\n        {\n          variant: \"link\",\n          pressed: true,\n          styles: {\n            opacity: 0.7,\n          },\n        },\n      ],\n    },\n    label: {\n      fontSize: theme.typography.sizes.sm,\n      lineHeight: theme.typography.lineHeights.sm,\n      fontWeight: theme.typography.weights.medium,\n      color: theme.colors.primaryForeground,\n      variants: {\n        variant: {\n          default: {\n            color: theme.colors.primaryForeground,\n          },\n          destructive: {\n            color: theme.colors.destructiveForeground,\n          },\n          outline: {\n            color: theme.colors.foreground,\n          },\n          secondary: {\n            color: theme.colors.secondaryForeground,\n          },\n          ghost: {\n            color: theme.colors.foreground,\n          },\n          link: {\n            color: theme.colors.primary,\n            textDecorationLine: \"underline\",\n          },\n        },\n        size: {\n          default: {\n            fontSize: theme.typography.sizes.sm,\n            lineHeight: theme.typography.lineHeights.sm,\n          },\n          sm: {\n            fontSize: theme.typography.sizes.xs,\n            lineHeight: theme.typography.lineHeights.xs,\n          },\n          lg: {\n            fontSize: theme.typography.sizes.md,\n            lineHeight: theme.typography.lineHeights.md,\n          },\n          icon: {\n            fontSize: theme.typography.sizes.sm,\n            lineHeight: theme.typography.lineHeights.sm,\n          },\n        },\n      },\n    },\n    spinner: {\n      marginRight: 8,\n    },\n  }\n})\n\ntype ButtonRef = React.ComponentRef<typeof Pressable>\n\n/**\n * A consistent, accessible button component built on `Pressable`.\n * Supports variants, sizes, and a loading state.\n *\n * @example\n * <Button variant=\"destructive\" onPress={handleDelete}>\n *   Delete Account\n * </Button>\n */\nexport const Button = forwardRef<ButtonRef, ButtonProps>(\n  (\n    {\n      variant = DEFAULT_VARIANT,\n      size = DEFAULT_SIZE,\n      loading = false,\n      disabled,\n      style,\n      textStyle,\n      children,\n      onFocus,\n      onBlur,\n      onPressIn,\n      onPressOut,\n      accessibilityRole,\n      ...props\n    },\n    ref,\n  ) => {\n    const { theme } = useUnistyles()\n    const [focusVisible, setFocusVisible] = useState(false)\n    const [pressed, setPressed] = useState(false)\n    const isDisabled = disabled || loading\n    const hasText = typeof children === \"string\" || typeof children === \"number\"\n\n    const baseVariants = {\n      variant: variant === \"default\" ? undefined : variant,\n      size: size === \"default\" ? undefined : size,\n      disabled: isDisabled,\n      loading,\n      focusVisible,\n    }\n\n    styles.useVariants({\n      ...baseVariants,\n      pressed: pressed && !isDisabled ? true : undefined,\n    })\n\n    useEffect(() => {\n      if (isDisabled) {\n        setPressed(false)\n      }\n    }, [isDisabled])\n\n    const spinnerColor = useMemo(() => {\n      switch (variant) {\n        case \"destructive\":\n          return theme.colors.destructiveForeground\n        case \"outline\":\n        case \"ghost\":\n          return theme.colors.foreground\n        case \"secondary\":\n          return theme.colors.secondaryForeground\n        case \"link\":\n          return theme.colors.primary\n        default:\n          return theme.colors.primaryForeground\n      }\n    }, [theme, variant])\n\n    const handleFocus: PressableProps[\"onFocus\"] = (event) => {\n      if (Platform.OS === \"web\") {\n        setFocusVisible(true)\n      }\n      onFocus?.(event)\n    }\n\n    const handleBlur: PressableProps[\"onBlur\"] = (event) => {\n      if (Platform.OS === \"web\") {\n        setFocusVisible(false)\n      }\n      onBlur?.(event)\n    }\n\n    const handlePressIn: PressableProps[\"onPressIn\"] = (event) => {\n      if (!isDisabled) {\n        setPressed(true)\n      }\n      onPressIn?.(event)\n    }\n\n    const handlePressOut: PressableProps[\"onPressOut\"] = (event) => {\n      setPressed(false)\n      onPressOut?.(event)\n    }\n\n    return (\n      <Pressable\n        ref={ref}\n        accessibilityRole={accessibilityRole ?? \"button\"}\n        accessibilityState={{ disabled: isDisabled, busy: loading }}\n        disabled={isDisabled}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n        onPressIn={handlePressIn}\n        onPressOut={handlePressOut}\n        style={[styles.container as ViewStyle, style]}\n        {...props}\n      >\n        {loading ? (\n          <ActivityIndicator\n            color={spinnerColor}\n            size=\"small\"\n            style={hasText ? (styles.spinner as ViewStyle) : undefined}\n          />\n        ) : null}\n        {hasText ? (\n          <Text style={[styles.label as TextStyle, textStyle]}>{children}</Text>\n        ) : (\n          (children as React.ReactNode)\n        )}\n      </Pressable>\n    )\n  },\n)\n\nButton.displayName = \"Button\"\n",
      "type": "registry:ui"
    }
  ]
}
