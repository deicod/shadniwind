{
  "name": "sheet",
  "type": "registry:ui",
  "title": "Sheet",
  "description": "A dialog variant that slides in from the edge of the screen.",
  "registryDependencies": [
    "@shadniwind/tokens",
    "@shadniwind/portal",
    "@shadniwind/overlay",
    "@shadniwind/focus",
    "@shadniwind/scroll-lock",
    "@shadniwind/press"
  ],
  "files": [
    {
      "path": "components/ui/sheet.tsx",
      "content": "import * as React from \"react\"\nimport {\n  Platform,\n  Pressable,\n  type PressableProps,\n  type StyleProp,\n  Text,\n  type TextProps,\n  type TextStyle,\n  View,\n  type ViewProps,\n  type ViewStyle,\n} from \"react-native\"\nimport { StyleSheet } from \"react-native-unistyles\"\nimport { FocusScope } from \"../primitives/focus/index\"\nimport { DismissLayer } from \"../primitives/overlay/index\"\nimport { Portal } from \"../primitives/portal/index\"\nimport { composeEventHandlers } from \"../primitives/press/index\"\nimport { useScrollLock } from \"../primitives/scroll-lock/index\"\n\ntype SheetContextValue = {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  triggerRef: React.RefObject<View | null>\n  contentRef: React.RefObject<View | null>\n  titleId: string\n  descriptionId: string\n  modal: boolean\n}\n\nconst SheetContext = React.createContext<SheetContextValue | undefined>(\n  undefined,\n)\n\nfunction useSheet() {\n  const context = React.useContext(SheetContext)\n  if (!context) {\n    throw new Error(\"Sheet components must be used within a Sheet\")\n  }\n  return context\n}\n\nexport type SheetProps = {\n  children: React.ReactNode\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n  modal?: boolean\n}\n\nexport function Sheet({\n  children,\n  defaultOpen = false,\n  open: openProp,\n  onOpenChange,\n  modal = true,\n}: SheetProps) {\n  const [open, setOpen] = React.useState(defaultOpen)\n  const triggerRef = React.useRef<View>(null)\n  const contentRef = React.useRef<View>(null)\n  const titleId = React.useId()\n  const descriptionId = React.useId()\n\n  const isControlled = openProp !== undefined\n  const isOpen = isControlled ? openProp : open\n\n  const handleOpenChange = React.useCallback(\n    (nextOpen: boolean) => {\n      if (!isControlled) {\n        setOpen(nextOpen)\n      }\n      onOpenChange?.(nextOpen)\n    },\n    [isControlled, onOpenChange],\n  )\n\n  return (\n    <SheetContext.Provider\n      value={{\n        open: !!isOpen,\n        onOpenChange: handleOpenChange,\n        triggerRef,\n        contentRef,\n        titleId,\n        descriptionId,\n        modal,\n      }}\n    >\n      {children}\n    </SheetContext.Provider>\n  )\n}\n\nexport type SheetTriggerProps = PressableProps & { asChild?: boolean }\n\nexport const SheetTrigger = React.forwardRef<\n  React.ComponentRef<typeof Pressable>,\n  SheetTriggerProps\n>(({ children, asChild, onPress, disabled, ...props }, ref) => {\n  const { open, onOpenChange, triggerRef } = useSheet()\n  const isDisabled = !!disabled\n\n  const handlePress = React.useCallback(\n    (event: unknown) => {\n      if (isDisabled) return\n      onOpenChange(!open)\n      // @ts-expect-error - React Native event type\n      onPress?.(event)\n    },\n    [isDisabled, open, onOpenChange, onPress],\n  )\n\n  React.useEffect(() => {\n    if (ref) {\n      if (typeof ref === \"function\") {\n        ref(triggerRef.current)\n      } else {\n        ;(ref as { current: View | null }).current = triggerRef.current\n      }\n    }\n  }, [ref, triggerRef])\n\n  if (asChild && React.isValidElement(children)) {\n    const child = children as React.ReactElement<{\n      onPress?: (event: unknown) => void\n    }>\n    const childOnPress = isDisabled ? undefined : child.props.onPress\n    // biome-ignore lint/suspicious/noExplicitAny: Cloning logic\n    return React.cloneElement(child as React.ReactElement<any>, {\n      ref: triggerRef,\n      onPress: composeEventHandlers(childOnPress, handlePress),\n      role: Platform.OS === \"web\" ? \"button\" : undefined,\n      \"aria-expanded\": Platform.OS === \"web\" ? open : undefined,\n      \"aria-haspopup\": Platform.OS === \"web\" ? \"dialog\" : undefined,\n      accessibilityRole: \"button\",\n      accessibilityState: {\n        expanded: open,\n        disabled: isDisabled,\n      },\n      disabled,\n      ...props,\n    })\n  }\n\n  return (\n    <Pressable\n      ref={triggerRef}\n      role={Platform.OS === \"web\" ? \"button\" : undefined}\n      aria-expanded={Platform.OS === \"web\" ? open : undefined}\n      aria-haspopup={Platform.OS === \"web\" ? \"dialog\" : undefined}\n      accessibilityRole=\"button\"\n      accessibilityState={{\n        expanded: open,\n        disabled: isDisabled,\n      }}\n      disabled={disabled}\n      onPress={handlePress}\n      {...props}\n    >\n      {children}\n    </Pressable>\n  )\n})\n\nSheetTrigger.displayName = \"SheetTrigger\"\n\nexport type SheetCloseProps = PressableProps & { asChild?: boolean }\n\nexport const SheetClose = React.forwardRef<\n  React.ComponentRef<typeof Pressable>,\n  SheetCloseProps\n>(({ children, asChild, onPress, disabled, ...props }, ref) => {\n  const { onOpenChange } = useSheet()\n  const isDisabled = !!disabled\n\n  const handlePress = React.useCallback(\n    (event: unknown) => {\n      if (isDisabled) return\n      onOpenChange(false)\n      // @ts-expect-error - React Native event type\n      onPress?.(event)\n    },\n    [isDisabled, onOpenChange, onPress],\n  )\n\n  if (asChild && React.isValidElement(children)) {\n    const child = children as React.ReactElement<{\n      onPress?: (event: unknown) => void\n    }>\n    const childOnPress = isDisabled ? undefined : child.props.onPress\n    // biome-ignore lint/suspicious/noExplicitAny: Cloning logic\n    return React.cloneElement(child as React.ReactElement<any>, {\n      ref,\n      onPress: composeEventHandlers(childOnPress, handlePress),\n      accessibilityRole: \"button\",\n      accessibilityState: {\n        disabled: isDisabled,\n      },\n      disabled,\n      ...props,\n    })\n  }\n\n  return (\n    <Pressable\n      ref={ref}\n      accessibilityRole=\"button\"\n      accessibilityState={{ disabled: isDisabled }}\n      disabled={disabled}\n      onPress={handlePress}\n      {...props}\n    >\n      {children}\n    </Pressable>\n  )\n})\n\nSheetClose.displayName = \"SheetClose\"\n\nexport type SheetSide = \"right\" | \"left\" | \"bottom\" | \"top\"\n\nexport type SheetContentProps = ViewProps & {\n  side?: SheetSide\n  overlayStyle?: StyleProp<ViewStyle>\n  dismissable?: boolean\n  onDismiss?: () => void\n}\n\nexport const SheetContent = React.forwardRef<View, SheetContentProps>(\n  (\n    {\n      children,\n      style,\n      overlayStyle,\n      side = \"right\",\n      dismissable,\n      onDismiss,\n      ...props\n    },\n    ref,\n  ) => {\n    const {\n      open,\n      onOpenChange,\n      contentRef,\n      titleId,\n      descriptionId,\n      modal,\n    } = useSheet()\n\n    useScrollLock(open && modal)\n    const variantStyles = styles.useVariants({\n      side,\n    }) as unknown\n    const contentVariantStyle =\n      variantStyles &&\n      typeof variantStyles === \"object\" &&\n      \"content\" in variantStyles\n        ? (variantStyles as typeof styles).content\n        : variantStyles\n\n    const handleDismiss = React.useCallback(() => {\n      onOpenChange(false)\n      onDismiss?.()\n    }, [onOpenChange, onDismiss])\n\n    const setContentRef = React.useCallback(\n      (node: View | null) => {\n        contentRef.current = node\n        if (typeof ref === \"function\") {\n          ref(node)\n        } else if (ref) {\n          ;(ref as { current: View | null }).current = node\n        }\n      },\n      [ref, contentRef],\n    )\n\n    if (!open) return null\n\n    const isDismissable = dismissable ?? modal\n\n    return (\n      <Portal>\n        <DismissLayer\n          onDismiss={handleDismiss}\n          dismissable={isDismissable}\n          scrim={modal}\n          scrimStyle={[styles.overlay, overlayStyle]}\n        >\n          <FocusScope trapped={modal} loop={true} style={styles.container}>\n            <View\n              ref={setContentRef}\n              role={Platform.OS === \"web\" ? \"dialog\" : undefined}\n              aria-modal={Platform.OS === \"web\" ? modal : undefined}\n              aria-labelledby={Platform.OS === \"web\" ? titleId : undefined}\n              aria-describedby={Platform.OS === \"web\" ? descriptionId : undefined}\n              accessibilityViewIsModal={modal}\n              style={\n                [\n                  styles.content,\n                  contentVariantStyle,\n                  style,\n                  // biome-ignore lint/suspicious/noExplicitAny: Style array may include variant styles.\n                ] as any\n              }\n              {...props}\n            >\n              {children}\n            </View>\n          </FocusScope>\n        </DismissLayer>\n      </Portal>\n    )\n  },\n)\n\nSheetContent.displayName = \"SheetContent\"\n\nexport type SheetHeaderProps = ViewProps & {\n  style?: StyleProp<ViewStyle>\n}\n\nexport const SheetHeader = React.forwardRef<View, SheetHeaderProps>(\n  ({ style, ...props }, ref) => {\n    return <View ref={ref} style={[styles.header, style]} {...props} />\n  },\n)\n\nSheetHeader.displayName = \"SheetHeader\"\n\nexport type SheetFooterProps = ViewProps & {\n  style?: StyleProp<ViewStyle>\n}\n\nexport const SheetFooter = React.forwardRef<View, SheetFooterProps>(\n  ({ style, ...props }, ref) => {\n    return <View ref={ref} style={[styles.footer, style]} {...props} />\n  },\n)\n\nSheetFooter.displayName = \"SheetFooter\"\n\nexport type SheetTitleProps = TextProps & {\n  style?: StyleProp<TextStyle>\n}\n\nexport const SheetTitle = React.forwardRef<Text, SheetTitleProps>(\n  ({ style, ...props }, ref) => {\n    const { titleId } = useSheet()\n    return (\n      <Text ref={ref} nativeID={titleId} style={[styles.title, style]} {...props} />\n    )\n  },\n)\n\nSheetTitle.displayName = \"SheetTitle\"\n\nexport type SheetDescriptionProps = TextProps & {\n  style?: StyleProp<TextStyle>\n}\n\nexport const SheetDescription = React.forwardRef<Text, SheetDescriptionProps>(\n  ({ style, ...props }, ref) => {\n    const { descriptionId } = useSheet()\n    return (\n      <Text\n        ref={ref}\n        nativeID={descriptionId}\n        style={[styles.description, style]}\n        {...props}\n      />\n    )\n  },\n)\n\nSheetDescription.displayName = \"SheetDescription\"\n\nconst styles = StyleSheet.create((theme) => ({\n  overlay: {\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n  },\n  container: {\n    flex: 1,\n  },\n  content: {\n    position: \"absolute\",\n    borderRadius: theme.radius.lg,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    backgroundColor: theme.colors.background,\n    padding: theme.spacing[6],\n    shadowColor: theme.colors.foreground,\n    shadowOpacity: 0.15,\n    shadowRadius: 10,\n    elevation: 4,\n    variants: {\n      side: {\n        right: {\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: \"80%\",\n          maxWidth: 480,\n          borderRightWidth: 0,\n          borderTopRightRadius: 0,\n          borderBottomRightRadius: 0,\n        },\n        left: {\n          top: 0,\n          bottom: 0,\n          left: 0,\n          width: \"80%\",\n          maxWidth: 480,\n          borderLeftWidth: 0,\n          borderTopLeftRadius: 0,\n          borderBottomLeftRadius: 0,\n        },\n        bottom: {\n          left: 0,\n          right: 0,\n          bottom: 0,\n          height: \"60%\",\n          maxHeight: 640,\n          borderBottomWidth: 0,\n          borderBottomLeftRadius: 0,\n          borderBottomRightRadius: 0,\n        },\n        top: {\n          left: 0,\n          right: 0,\n          top: 0,\n          height: \"60%\",\n          maxHeight: 640,\n          borderTopWidth: 0,\n          borderTopLeftRadius: 0,\n          borderTopRightRadius: 0,\n        },\n      },\n    },\n  },\n  header: {\n    marginBottom: theme.spacing[4],\n    gap: theme.spacing[1],\n  },\n  footer: {\n    marginTop: theme.spacing[4],\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    alignItems: \"center\",\n    gap: theme.spacing[2],\n    flexWrap: \"wrap\",\n  },\n  title: {\n    color: theme.colors.foreground,\n    fontFamily: theme.typography.families.sans,\n    fontSize: theme.typography.sizes.lg,\n    lineHeight: theme.typography.lineHeights.lg,\n    fontWeight: theme.typography.weights.semibold,\n  },\n  description: {\n    color: theme.colors.mutedForeground,\n    fontFamily: theme.typography.families.sans,\n    fontSize: theme.typography.sizes.sm,\n    lineHeight: theme.typography.lineHeights.md,\n  },\n}))\n",
      "type": "registry:ui"
    }
  ]
}
