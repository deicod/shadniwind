{
  "name": "switch",
  "type": "registry:ui",
  "title": "Switch",
  "description": "A toggle switch with animated knob transition, controlled/uncontrolled state support, and web accessibility.",
  "registryDependencies": [
    "tokens"
  ],
  "files": [
    {
      "path": "components/ui/switch.tsx",
      "content": "import * as React from \"react\"\nimport {\n  Animated,\n  Platform,\n  Pressable,\n  type PressableProps,\n} from \"react-native\"\nimport { StyleSheet, useUnistyles } from \"react-native-unistyles\"\n\nexport type SwitchProps = Omit<PressableProps, \"onPress\"> & {\n  checked?: boolean\n  defaultChecked?: boolean\n  onCheckedChange?: (checked: boolean) => void\n  disabled?: boolean\n}\n\nexport const Switch = React.forwardRef<\n  React.ComponentRef<typeof Pressable>,\n  SwitchProps\n>(\n  (\n    {\n      checked: checkedProp,\n      defaultChecked = false,\n      onCheckedChange,\n      disabled = false,\n      style,\n      ...props\n    },\n    ref,\n  ) => {\n    const [uncontrolledChecked, setUncontrolledChecked] =\n      React.useState<boolean>(defaultChecked)\n\n    const isControlled = checkedProp !== undefined\n    const checked = isControlled ? checkedProp : uncontrolledChecked\n\n    const knobPosition = React.useRef(\n      new Animated.Value(checked ? 1 : 0),\n    ).current\n\n    React.useEffect(() => {\n      Animated.spring(knobPosition, {\n        toValue: checked ? 1 : 0,\n        useNativeDriver: true,\n        friction: 7,\n        tension: 40,\n      }).start()\n    }, [checked, knobPosition])\n\n    const handlePress = React.useCallback(() => {\n      if (disabled) return\n\n      const nextChecked = !checked\n\n      if (!isControlled) {\n        setUncontrolledChecked(nextChecked)\n      }\n\n      onCheckedChange?.(nextChecked)\n    }, [checked, disabled, isControlled, onCheckedChange])\n\n    const handleKeyDown = React.useCallback(\n      // biome-ignore lint/suspicious/noExplicitAny: Web-only keyboard event type\n      (event: any) => {\n        if (Platform.OS === \"web\" && event.key === \" \") {\n          event.preventDefault()\n          handlePress()\n        }\n      },\n      [handlePress],\n    )\n\n    const variantStyles = styles.useVariants({\n      checked,\n      disabled,\n    })\n\n    const { theme } = useUnistyles()\n\n    const knobTranslateX = knobPosition.interpolate({\n      inputRange: [0, 1],\n      outputRange: [2, 22],\n    })\n\n    return (\n      <Pressable\n        ref={ref}\n        role={Platform.OS === \"web\" ? \"switch\" : undefined}\n        aria-checked={Platform.OS === \"web\" ? checked : undefined}\n        aria-disabled={Platform.OS === \"web\" ? disabled : undefined}\n        accessible={true}\n        accessibilityRole=\"switch\"\n        accessibilityState={{\n          checked,\n          disabled,\n        }}\n        onPress={handlePress}\n        // @ts-expect-error - onKeyDown is web-only\n        onKeyDown={Platform.OS === \"web\" ? handleKeyDown : undefined}\n        disabled={disabled}\n        style={({ pressed }) =>\n          [\n            styles.track,\n            variantStyles,\n            pressed && !disabled && styles.trackPressed,\n            typeof style === \"function\" ? style({ pressed }) : style,\n            // biome-ignore lint/suspicious/noExplicitAny: Complex style array with variants requires type assertion\n          ] as any\n        }\n        {...props}\n      >\n        <Animated.View\n          style={[\n            styles.knob,\n            {\n              transform: [{ translateX: knobTranslateX }],\n              backgroundColor: checked\n                ? theme.colors.background\n                : theme.colors.mutedForeground,\n            },\n          ]}\n        />\n      </Pressable>\n    )\n  },\n)\n\nSwitch.displayName = \"Switch\"\n\nconst styles = StyleSheet.create((theme) => ({\n  track: {\n    width: 44,\n    height: 24,\n    borderRadius: 24,\n    backgroundColor: theme.colors.input,\n    borderWidth: 2,\n    borderColor: theme.colors.input,\n    justifyContent: \"center\",\n    variants: {\n      checked: {\n        true: {\n          backgroundColor: theme.colors.primary,\n          borderColor: theme.colors.primary,\n        },\n      },\n      disabled: {\n        true: {\n          opacity: 0.5,\n        },\n      },\n    },\n  },\n  trackPressed: {\n    opacity: 0.8,\n  },\n  knob: {\n    width: 20,\n    height: 20,\n    borderRadius: 20,\n    shadowColor: \"#000\",\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.2,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n}))\n",
      "type": "registry:ui"
    }
  ]
}
