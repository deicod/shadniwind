{
  "name": "alert-dialog",
  "type": "registry:ui",
  "title": "Alert Dialog",
  "description": "A modal dialog that requires an explicit action to close.",
  "registryDependencies": [
    "tokens",
    "portal",
    "overlay",
    "focus",
    "scroll-lock",
    "press"
  ],
  "files": [
    {
      "path": "components/ui/alert-dialog.tsx",
      "content": "import * as React from \"react\"\nimport {\n  Platform,\n  Pressable,\n  type PressableProps,\n  type StyleProp,\n  Text,\n  type TextProps,\n  type TextStyle,\n  View,\n  type ViewProps,\n  type ViewStyle,\n} from \"react-native\"\nimport { StyleSheet } from \"react-native-unistyles\"\nimport { FocusScope } from \"../primitives/focus/index.js\"\nimport { DismissLayer } from \"../primitives/overlay/index.js\"\nimport { Portal } from \"../primitives/portal/index.js\"\nimport { composeEventHandlers } from \"../primitives/press/index.js\"\nimport { useScrollLock } from \"../primitives/scroll-lock/index.js\"\n\ntype AlertDialogContextValue = {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  triggerRef: React.RefObject<View | null>\n  contentRef: React.RefObject<View | null>\n  titleId: string\n  descriptionId: string\n}\n\nconst AlertDialogContext = React.createContext<AlertDialogContextValue | undefined>(\n  undefined,\n)\n\nfunction useAlertDialog() {\n  const context = React.useContext(AlertDialogContext)\n  if (!context) {\n    throw new Error(\"AlertDialog components must be used within an AlertDialog\")\n  }\n  return context\n}\n\nexport type AlertDialogProps = {\n  children: React.ReactNode\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}\n\nexport function AlertDialog({\n  children,\n  defaultOpen = false,\n  open: openProp,\n  onOpenChange,\n}: AlertDialogProps) {\n  const [open, setOpen] = React.useState(defaultOpen)\n  const triggerRef = React.useRef<View>(null)\n  const contentRef = React.useRef<View>(null)\n  const titleId = React.useId()\n  const descriptionId = React.useId()\n\n  const isControlled = openProp !== undefined\n  const isOpen = isControlled ? openProp : open\n\n  const handleOpenChange = React.useCallback(\n    (nextOpen: boolean) => {\n      if (!isControlled) {\n        setOpen(nextOpen)\n      }\n      onOpenChange?.(nextOpen)\n    },\n    [isControlled, onOpenChange],\n  )\n\n  return (\n    <AlertDialogContext.Provider\n      value={{\n        open: !!isOpen,\n        onOpenChange: handleOpenChange,\n        triggerRef,\n        contentRef,\n        titleId,\n        descriptionId,\n      }}\n    >\n      {children}\n    </AlertDialogContext.Provider>\n  )\n}\n\nexport type AlertDialogTriggerProps = PressableProps & { asChild?: boolean }\n\nexport const AlertDialogTrigger = React.forwardRef<\n  React.ComponentRef<typeof Pressable>,\n  AlertDialogTriggerProps\n>(({ children, asChild, onPress, disabled, ...props }, ref) => {\n  const { open, onOpenChange, triggerRef } = useAlertDialog()\n  const isDisabled = !!disabled\n\n  const handlePress = React.useCallback(\n    (event: unknown) => {\n      if (isDisabled) return\n      onOpenChange(!open)\n      // @ts-expect-error - React Native event type\n      onPress?.(event)\n    },\n    [isDisabled, open, onOpenChange, onPress],\n  )\n\n  React.useEffect(() => {\n    if (ref) {\n      if (typeof ref === \"function\") {\n        ref(triggerRef.current)\n      } else {\n        ;(ref as { current: View | null }).current = triggerRef.current\n      }\n    }\n  }, [ref, triggerRef])\n\n  if (asChild && React.isValidElement(children)) {\n    const child = children as React.ReactElement<{\n      onPress?: (event: unknown) => void\n    }>\n    const childOnPress = isDisabled ? undefined : child.props.onPress\n    // biome-ignore lint/suspicious/noExplicitAny: Cloning logic\n    return React.cloneElement(child as React.ReactElement<any>, {\n      ref: triggerRef,\n      onPress: composeEventHandlers(childOnPress, handlePress),\n      role: Platform.OS === \"web\" ? \"button\" : undefined,\n      \"aria-expanded\": Platform.OS === \"web\" ? open : undefined,\n      \"aria-haspopup\": Platform.OS === \"web\" ? \"dialog\" : undefined,\n      accessibilityRole: \"button\",\n      accessibilityState: {\n        expanded: open,\n        disabled: isDisabled,\n      },\n      disabled,\n      ...props,\n    })\n  }\n\n  return (\n    <Pressable\n      ref={triggerRef}\n      role={Platform.OS === \"web\" ? \"button\" : undefined}\n      aria-expanded={Platform.OS === \"web\" ? open : undefined}\n      aria-haspopup={Platform.OS === \"web\" ? \"dialog\" : undefined}\n      accessibilityRole=\"button\"\n      accessibilityState={{\n        expanded: open,\n        disabled: isDisabled,\n      }}\n      disabled={disabled}\n      onPress={handlePress}\n      {...props}\n    >\n      {children}\n    </Pressable>\n  )\n})\n\nAlertDialogTrigger.displayName = \"AlertDialogTrigger\"\n\nexport type AlertDialogContentSize = \"default\" | \"sm\" | \"lg\" | \"fullscreen\"\n\nexport type AlertDialogContentProps = ViewProps & {\n  size?: AlertDialogContentSize\n  overlayStyle?: StyleProp<ViewStyle>\n  dismissable?: boolean\n  onDismiss?: () => void\n}\n\nexport const AlertDialogContent = React.forwardRef<View, AlertDialogContentProps>(\n  (\n    {\n      children,\n      style,\n      overlayStyle,\n      size = \"default\",\n      dismissable = false,\n      onDismiss,\n      ...props\n    },\n    ref,\n  ) => {\n    const { open, onOpenChange, contentRef, titleId, descriptionId } =\n      useAlertDialog()\n\n    useScrollLock(open)\n    const variantStyles = styles.useVariants({\n      size: size === \"default\" ? undefined : size,\n    })\n\n    const handleDismiss = React.useCallback(() => {\n      onOpenChange(false)\n      onDismiss?.()\n    }, [onOpenChange, onDismiss])\n\n    const setContentRef = React.useCallback(\n      (node: View | null) => {\n        contentRef.current = node\n        if (typeof ref === \"function\") {\n          ref(node)\n        } else if (ref) {\n          ;(ref as { current: View | null }).current = node\n        }\n      },\n      [ref, contentRef],\n    )\n\n    if (!open) return null\n\n    return (\n      <Portal>\n        <DismissLayer\n          onDismiss={handleDismiss}\n          dismissable={dismissable}\n          scrim={true}\n          scrimStyle={[styles.overlay, overlayStyle]}\n        >\n          <FocusScope trapped={true} loop={true} style={styles.center}>\n            <View\n              ref={setContentRef}\n              role={Platform.OS === \"web\" ? \"alertdialog\" : undefined}\n              aria-modal={Platform.OS === \"web\" ? true : undefined}\n              aria-labelledby={Platform.OS === \"web\" ? titleId : undefined}\n              aria-describedby={Platform.OS === \"web\" ? descriptionId : undefined}\n              accessibilityViewIsModal={true}\n              style={\n                [\n                  styles.content,\n                  variantStyles,\n                  style,\n                  // biome-ignore lint/suspicious/noExplicitAny: Style array may include variant styles.\n                ] as any\n              }\n              {...props}\n            >\n              {children}\n            </View>\n          </FocusScope>\n        </DismissLayer>\n      </Portal>\n    )\n  },\n)\n\nAlertDialogContent.displayName = \"AlertDialogContent\"\n\nexport type AlertDialogHeaderProps = ViewProps & {\n  style?: StyleProp<ViewStyle>\n}\n\nexport const AlertDialogHeader = React.forwardRef<View, AlertDialogHeaderProps>(\n  ({ style, ...props }, ref) => {\n    return <View ref={ref} style={[styles.header, style]} {...props} />\n  },\n)\n\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nexport type AlertDialogFooterProps = ViewProps & {\n  style?: StyleProp<ViewStyle>\n}\n\nexport const AlertDialogFooter = React.forwardRef<View, AlertDialogFooterProps>(\n  ({ style, ...props }, ref) => {\n    return <View ref={ref} style={[styles.footer, style]} {...props} />\n  },\n)\n\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nexport type AlertDialogTitleProps = TextProps & {\n  style?: StyleProp<TextStyle>\n}\n\nexport const AlertDialogTitle = React.forwardRef<Text, AlertDialogTitleProps>(\n  ({ style, ...props }, ref) => {\n    const { titleId } = useAlertDialog()\n    return (\n      <Text ref={ref} nativeID={titleId} style={[styles.title, style]} {...props} />\n    )\n  },\n)\n\nAlertDialogTitle.displayName = \"AlertDialogTitle\"\n\nexport type AlertDialogDescriptionProps = TextProps & {\n  style?: StyleProp<TextStyle>\n}\n\nexport const AlertDialogDescription = React.forwardRef<\n  Text,\n  AlertDialogDescriptionProps\n>(({ style, ...props }, ref) => {\n  const { descriptionId } = useAlertDialog()\n  return (\n    <Text\n      ref={ref}\n      nativeID={descriptionId}\n      style={[styles.description, style]}\n      {...props}\n    />\n  )\n})\n\nAlertDialogDescription.displayName = \"AlertDialogDescription\"\n\nexport type AlertDialogActionProps = PressableProps & { asChild?: boolean }\n\nexport const AlertDialogAction = React.forwardRef<\n  React.ComponentRef<typeof Pressable>,\n  AlertDialogActionProps\n>(({ children, asChild, onPress, disabled, style, ...props }, ref) => {\n  const { onOpenChange } = useAlertDialog()\n  const isDisabled = !!disabled\n\n  const handlePress = React.useCallback(\n    (event: unknown) => {\n      if (isDisabled) return\n      onOpenChange(false)\n      // @ts-expect-error - React Native event type\n      onPress?.(event)\n    },\n    [isDisabled, onOpenChange, onPress],\n  )\n\n  if (asChild && React.isValidElement(children)) {\n    const child = children as React.ReactElement<{\n      onPress?: (event: unknown) => void\n    }>\n    const childOnPress = isDisabled ? undefined : child.props.onPress\n    // biome-ignore lint/suspicious/noExplicitAny: Cloning logic\n    return React.cloneElement(child as React.ReactElement<any>, {\n      ref,\n      onPress: composeEventHandlers(childOnPress, handlePress),\n      accessibilityRole: \"button\",\n      accessibilityState: {\n        disabled: isDisabled,\n      },\n      disabled,\n      ...props,\n    })\n  }\n\n  return (\n    <Pressable\n      ref={ref}\n      role={Platform.OS === \"web\" ? \"button\" : undefined}\n      accessibilityRole=\"button\"\n      accessibilityState={{ disabled: isDisabled }}\n      disabled={isDisabled}\n      onPress={handlePress}\n      style={({ pressed }) =>\n        [\n          styles.action,\n          isDisabled && styles.actionDisabled,\n          pressed && !isDisabled && styles.actionPressed,\n          typeof style === \"function\" ? style({ pressed }) : style,\n        ] as unknown as StyleProp<ViewStyle>\n      }\n      {...props}\n    >\n      {typeof children === \"string\" ? (\n        <Text style={styles.actionText}>{children}</Text>\n      ) : (\n        children\n      )}\n    </Pressable>\n  )\n})\n\nAlertDialogAction.displayName = \"AlertDialogAction\"\n\nexport type AlertDialogCancelProps = PressableProps & { asChild?: boolean }\n\nexport const AlertDialogCancel = React.forwardRef<\n  React.ComponentRef<typeof Pressable>,\n  AlertDialogCancelProps\n>(({ children, asChild, onPress, disabled, style, ...props }, ref) => {\n  const { onOpenChange } = useAlertDialog()\n  const isDisabled = !!disabled\n\n  const handlePress = React.useCallback(\n    (event: unknown) => {\n      if (isDisabled) return\n      onOpenChange(false)\n      // @ts-expect-error - React Native event type\n      onPress?.(event)\n    },\n    [isDisabled, onOpenChange, onPress],\n  )\n\n  if (asChild && React.isValidElement(children)) {\n    const child = children as React.ReactElement<{\n      onPress?: (event: unknown) => void\n    }>\n    const childOnPress = isDisabled ? undefined : child.props.onPress\n    // biome-ignore lint/suspicious/noExplicitAny: Cloning logic\n    return React.cloneElement(child as React.ReactElement<any>, {\n      ref,\n      onPress: composeEventHandlers(childOnPress, handlePress),\n      accessibilityRole: \"button\",\n      accessibilityState: {\n        disabled: isDisabled,\n      },\n      disabled,\n      ...props,\n    })\n  }\n\n  return (\n    <Pressable\n      ref={ref}\n      role={Platform.OS === \"web\" ? \"button\" : undefined}\n      accessibilityRole=\"button\"\n      accessibilityState={{ disabled: isDisabled }}\n      disabled={isDisabled}\n      onPress={handlePress}\n      style={({ pressed }) =>\n        [\n          styles.cancel,\n          isDisabled && styles.cancelDisabled,\n          pressed && !isDisabled && styles.cancelPressed,\n          typeof style === \"function\" ? style({ pressed }) : style,\n        ] as unknown as StyleProp<ViewStyle>\n      }\n      {...props}\n    >\n      {typeof children === \"string\" ? (\n        <Text style={styles.cancelText}>{children}</Text>\n      ) : (\n        children\n      )}\n    </Pressable>\n  )\n})\n\nAlertDialogCancel.displayName = \"AlertDialogCancel\"\n\nconst styles = StyleSheet.create((theme) => ({\n  overlay: {\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n  },\n  center: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: theme.spacing[4],\n  },\n  content: {\n    width: \"100%\",\n    maxWidth: 480,\n    borderRadius: theme.radius.lg,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    backgroundColor: theme.colors.background,\n    padding: theme.spacing[6],\n    shadowColor: theme.colors.foreground,\n    shadowOpacity: 0.15,\n    shadowRadius: 10,\n    elevation: 4,\n    variants: {\n      size: {\n        sm: {\n          maxWidth: 360,\n        },\n        lg: {\n          maxWidth: 640,\n        },\n        fullscreen: {\n          maxWidth: \"100%\",\n          width: \"100%\",\n          height: \"100%\",\n          borderRadius: 0,\n          padding: theme.spacing[8],\n        },\n      },\n    },\n  },\n  header: {\n    marginBottom: theme.spacing[4],\n    gap: theme.spacing[1],\n  },\n  footer: {\n    marginTop: theme.spacing[4],\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    alignItems: \"center\",\n    gap: theme.spacing[2],\n    flexWrap: \"wrap\",\n  },\n  title: {\n    color: theme.colors.foreground,\n    fontFamily: theme.typography.families.sans,\n    fontSize: theme.typography.sizes.lg,\n    lineHeight: theme.typography.lineHeights.lg,\n    fontWeight: theme.typography.weights.semibold,\n  },\n  description: {\n    color: theme.colors.mutedForeground,\n    fontFamily: theme.typography.families.sans,\n    fontSize: theme.typography.sizes.sm,\n    lineHeight: theme.typography.lineHeights.md,\n  },\n  action: {\n    height: 40,\n    paddingHorizontal: 16,\n    borderRadius: theme.radius.md,\n    borderWidth: 1,\n    borderColor: \"transparent\",\n    backgroundColor: theme.colors.primary,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  actionText: {\n    color: theme.colors.primaryForeground,\n    fontSize: theme.typography.sizes.sm,\n    lineHeight: theme.typography.lineHeights.sm,\n    fontWeight: theme.typography.weights.medium,\n  },\n  actionPressed: {\n    opacity: 0.9,\n  },\n  actionDisabled: {\n    opacity: 0.6,\n  },\n  cancel: {\n    height: 40,\n    paddingHorizontal: 16,\n    borderRadius: theme.radius.md,\n    borderWidth: 1,\n    borderColor: theme.colors.input,\n    backgroundColor: theme.colors.background,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  cancelText: {\n    color: theme.colors.foreground,\n    fontSize: theme.typography.sizes.sm,\n    lineHeight: theme.typography.lineHeights.sm,\n    fontWeight: theme.typography.weights.medium,\n  },\n  cancelPressed: {\n    opacity: 0.9,\n  },\n  cancelDisabled: {\n    opacity: 0.6,\n  },\n}))\n",
      "type": "registry:ui"
    }
  ]
}
