{
  "name": "progress",
  "type": "registry:ui",
  "title": "Progress",
  "description": "Progress bar with determinate and indeterminate modes.",
  "registryDependencies": [
    "tokens"
  ],
  "files": [
    {
      "path": "components/ui/progress.tsx",
      "content": "import * as React from \"react\"\nimport {\n  Animated,\n  Easing,\n  type LayoutChangeEvent,\n  type StyleProp,\n  View,\n  type ViewProps,\n  type ViewStyle,\n} from \"react-native\"\nimport { StyleSheet } from \"react-native-unistyles\"\n\nexport type ProgressProps = ViewProps & {\n  value?: number\n  min?: number\n  max?: number\n  indeterminate?: boolean\n  animate?: boolean\n  style?: StyleProp<ViewStyle>\n  indicatorStyle?: StyleProp<ViewStyle>\n}\n\nconst styles = StyleSheet.create((theme) => ({\n  root: {\n    height: theme.spacing[2],\n    width: \"100%\",\n    borderRadius: theme.radius.lg,\n    backgroundColor: theme.colors.muted,\n    overflow: \"hidden\",\n  },\n  indicator: {\n    height: \"100%\",\n    borderRadius: theme.radius.lg,\n    backgroundColor: theme.colors.primary,\n  },\n}))\n\ntype ProgressRef = React.ComponentRef<typeof View>\n\nexport const Progress = React.forwardRef<ProgressRef, ProgressProps>(\n  (\n    {\n      value,\n      min = 0,\n      max = 100,\n      indeterminate,\n      animate = true,\n      style,\n      indicatorStyle,\n      onLayout,\n      accessibilityRole,\n      accessibilityValue,\n      ...props\n    },\n    ref,\n  ) => {\n    const [width, setWidth] = React.useState(0)\n    const translateX = React.useRef(new Animated.Value(0)).current\n\n    const isIndeterminate =\n      indeterminate ?? (value === undefined || value === null)\n    const clampedValue = React.useMemo(() => {\n      if (typeof value !== \"number\" || Number.isNaN(value)) {\n        return min\n      }\n      return Math.min(Math.max(value, min), max)\n    }, [max, min, value])\n\n    const ratio = max > min ? (clampedValue - min) / (max - min) : 0\n    const percent = Math.max(0, Math.min(1, ratio))\n\n    const barWidth = React.useMemo(() => {\n      if (width <= 0) {\n        return 0\n      }\n      return Math.max(width * 0.4, 24)\n    }, [width])\n\n    React.useEffect(() => {\n      if (!isIndeterminate || !animate || width <= 0 || barWidth <= 0) {\n        translateX.stopAnimation()\n        return\n      }\n\n      translateX.setValue(-barWidth)\n\n      const loop = Animated.loop(\n        Animated.timing(translateX, {\n          toValue: width,\n          duration: 1200,\n          easing: Easing.inOut(Easing.ease),\n          useNativeDriver: true,\n        }),\n      )\n\n      loop.start()\n\n      return () => {\n        loop.stop()\n      }\n    }, [animate, barWidth, isIndeterminate, translateX, width])\n\n    const handleLayout = React.useCallback(\n      (event: LayoutChangeEvent) => {\n        setWidth(event.nativeEvent.layout.width)\n        onLayout?.(event)\n      },\n      [onLayout],\n    )\n\n    const indicatorStyles = isIndeterminate\n      ? {\n          width: barWidth,\n          transform: [{ translateX }],\n        }\n      : {\n          width: `${Math.round(percent * 100)}%` as `${number}%`,\n        }\n\n    const resolvedAccessibilityValue =\n      accessibilityValue ??\n      (isIndeterminate\n        ? { min, max }\n        : {\n            min,\n            max,\n            now: clampedValue,\n          })\n\n    return (\n      <View\n        ref={ref}\n        accessibilityRole={accessibilityRole ?? \"progressbar\"}\n        accessibilityValue={resolvedAccessibilityValue}\n        onLayout={handleLayout}\n        style={[styles.root, style]}\n        {...props}\n      >\n        <Animated.View\n          style={[styles.indicator, indicatorStyles, indicatorStyle]}\n        />\n      </View>\n    )\n  },\n)\n\nProgress.displayName = \"Progress\"\n",
      "type": "registry:ui"
    }
  ]
}
